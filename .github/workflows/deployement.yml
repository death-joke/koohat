name: "Server Deployement"
on:
	push:
  	branches: [main]

jobs:
	deployment:
	runs-on: ubuntu-latest

	steps:
	- uses: actions/checkout@v2
	- name: Say Hello!
	run: echo "Hello there!"

	- name: Deploy code to Server

	env:
		SSH_KEY: ${{ secrets.SSH_PUBLIC_KEY }}

	run: |
		echo $SSH_KEY | base64 -d > ssh-key
  chmod 400 ssh-key
    	ssh -i ssh-key -o StrictHostKeyChecking=no ubuntu@3.145.1.14 "cd /home/ubuntu/sample-app-deployment-with-github-actions && GIT_SSH_COMMAND='ssh -i /home/ubuntu/.ssh/ssh-key' git pull origin main"
